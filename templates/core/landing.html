{% extends "base.html" %}

{% block title %}Welcome - Firewall Report Center{% endblock %}

{% block content %}
<div class="space-y-6">
  <!-- Header (dashboard-känsla) -->
  <div class="flex items-center justify-between animate-slide-in mb-2">
    <div>
      <h1 class="text-3xl font-bold text-white mb-2">Firewall Report Center</h1>
      <p class="text-gray-400">
        Log ingestion • Alert rules • Multi-tenant organizations
      </p>
    </div>

    <div class="flex items-center space-x-3">
      {% if user.is_authenticated %}
        <a href="{% url 'dashboard:overview' %}"
           class="px-4 py-2 rounded-lg gradient-bg text-white font-medium card-hover">
          <i data-lucide="layout-dashboard" class="w-4 h-4 inline mr-1"></i> Dashboard
        </a>

      {% endif %}
    </div>
  </div>

  <!-- Stats cards (dashboard-stil) -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-slide-in anim-delay-50">
    <div class="bg-slate-800 border border-slate-700 rounded-xl p-6 card-hover">
      <p class="text-gray-400 text-sm mb-2"><i data-lucide="building" class="w-4 h-4 inline mr-1"></i> Organizations</p>
      <p class="text-3xl font-bold text-white">{{ stats.organizations|default:0 }}</p>
    </div>

    <div class="bg-slate-800 border border-slate-700 rounded-xl p-6 card-hover">
      <p class="text-gray-400 text-sm mb-2"><i data-lucide="server" class="w-4 h-4 inline mr-1"></i> Servers</p>
      <p class="text-3xl font-bold text-white">{{ stats.servers|default:0 }}</p>
    </div>

    <div class="bg-slate-800 border border-slate-700 rounded-xl p-6 card-hover">
      <p class="text-gray-400 text-sm mb-2"><i data-lucide="shield-alert" class="w-4 h-4 inline mr-1"></i> Blocked (30d)</p>
      <p class="text-3xl font-bold text-green-400">{{ stats.threats_blocked|default:0 }}</p>
    </div>

    <div class="bg-slate-800 border border-slate-700 rounded-xl p-6 card-hover">
      <p class="text-gray-400 text-sm mb-2"><i data-lucide="activity" class="w-4 h-4 inline mr-1"></i> Uptime / RT</p>
      <p class="text-xl font-semibold text-white">
        {{ stats.uptime|default:"99.9" }}% <span class="text-gray-500 mx-1">•</span> {{ stats.response_time|default:"50" }}ms
      </p>
    </div>
  </div>

  <!-- Features -->
  <div id="features" class="grid grid-cols-1 lg:grid-cols-3 gap-6 animate-slide-in anim-delay-100">
    <div class="bg-slate-800 border border-slate-700 rounded-xl p-6 card-hover">
      <h3 class="text-lg font-semibold text-white mb-2">
        <i data-lucide="plug-zap" class="w-5 h-5 inline mr-2 text-blue-400"></i> Ingest API
      </h3>
      <p class="text-gray-400 text-sm">Push logs via REST with org API keys and consistent parsing.</p>
    </div>

    <div class="bg-slate-800 border border-slate-700 rounded-xl p-6 card-hover">
      <h3 class="text-lg font-semibold text-white mb-2">
        <i data-lucide="shield-check" class="w-5 h-5 inline mr-2 text-green-400"></i> Rules + History
      </h3>
      <p class="text-gray-400 text-sm">Alert rules generate history and can notify configured channels.</p>
    </div>

    <div class="bg-slate-800 border border-slate-700 rounded-xl p-6 card-hover">
      <h3 class="text-lg font-semibold text-white mb-2">
        <i data-lucide="users" class="w-5 h-5 inline mr-2 text-purple-400"></i> Multi-tenant
      </h3>
      <p class="text-gray-400 text-sm">Organizations and members keep customers cleanly separated.</p>
    </div>
  </div>

  <!-- How it works -->
  <div id="how" class="bg-slate-800 border border-slate-700 rounded-xl p-6 card-hover animate-slide-in anim-delay-150">
    <h3 class="text-lg font-semibold text-white mb-4">
      <i data-lucide="workflow" class="w-5 h-5 inline mr-2 text-cyan-400"></i> How it works
    </h3>

    <ol class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
      <li class="bg-slate-700/40 rounded-lg p-4 border border-slate-600">
        <div class="font-semibold text-white mb-1">1) Ingest</div>
        <div class="text-gray-400">Agents/firewalls send events to the ingest endpoint.</div>
      </li>
      <li class="bg-slate-700/40 rounded-lg p-4 border border-slate-600">
        <div class="font-semibold text-white mb-1">2) Normalize</div>
        <div class="text-gray-400">Parse fields and enrich with org/source metadata.</div>
      </li>
      <li class="bg-slate-700/40 rounded-lg p-4 border border-slate-600">
        <div class="font-semibold text-white mb-1">3) Alert</div>
        <div class="text-gray-400">Rules trigger history + notifications to channels.</div>
      </li>
    </ol>
  </div>
</div>
{% endblock %}


{% block extra_js %}
<script>
  // Update clock in the landing snapshot
  function updateLandingTime() {
    const now = new Date();
    const time = now.toTimeString().split(' ')[0];
    const el = document.getElementById('landing-time');
    if (el) el.textContent = time;
  }
  updateLandingTime();
  setInterval(updateLandingTime, 1000);
</script>
{% endblock %}
